<ui:composition template="/resources/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:hf="http://java.sun.com/jsf/composite/hf">
	<ui:define name="content">
		<ui:include src="/dialogs/NewParticipantDialog.xhtml" />

		<f:metadata>
			<f:viewParam name="id" value="#{competitionController.id}" />
			<f:event type="preRenderView"
				listener="#{competitionController.loadCompetition()}" />
		</f:metadata>
		<h:form id="competitionForm">
			<b:well size="sm">
				<h4>
					<h:outputText value="#{competitionController.competition.subject}" />
				</h4>
				<h5>
					<h:outputText value="#{competitionController.competition.date}">
						<f:convertDateTime pattern="dd.MM.yyyy" type="date" />
					</h:outputText>
				</h5>
			</b:well>
			<b:tabView activeIndex="1" contentStyle="margin-top:10px">
				<b:tab title="Allgemein">
					<hf:competitionMetadata
						competition="#{competitionController.competition}">
					</hf:competitionMetadata>


					<b:commandButton id="saveCompetition" value="Ok" look="primary"
						action="#{competitionController.saveCompetition()}" update="@form">
					</b:commandButton>

				</b:tab>
				<b:tab title="Teilnehmer">
					<b:row>
						<b:column span="10"></b:column>
						<b:column span="2">
							<b:commandButton id="addParticipant" value="Neuer Teilnehmner"
								iconAwesome="plus"
								onclick="$('.newParticipantPseudoClass').modal();return false;" />
						</b:column>
					</b:row>
					<p:dataTable id="participants" var="participant"
						value="#{competitionController.competition.participants}"
						reflow="true">
						<p:column styleClass="col-md-2 col-xs-4" headerText="Vorname">
							<h:outputText value="#{participant.athlete.firstName}">
							</h:outputText>
						</p:column>
					</p:dataTable>
				</b:tab>
				<b:tab title="Ergebnisse">
					<p>This is the second tab.</p>
				</b:tab>
			</b:tabView>
		</h:form>
	</ui:define>
</ui:composition>
